@using TerranForum.Domain.Models
@using Microsoft.AspNetCore.Identity
@model Post

@inject SignInManager<ApplicationUser> SignInManager

@{
}

@foreach (var paragraph in Model.Content.Split("\r\n\r\n"))
{
    <p>@paragraph</p>
}
<div class="container-fluid">
    <div class="d-flex justify-content-end">
        @Model.User.UserName
    </div>
</div>
<div class="container">
    @foreach (var reply in Model.Replies)
    {
        <div class="container">
            <p>@reply.Content</p>
        </div>
    }
    <div>
        @if (SignInManager.IsSignedIn(User))
        {
            <a href="#" class="replyAchor" id="addReply">Add Comment</a>

            <div class="container invisible">
                <form method="post" asp-route-postId="@Model.Id" asp-controller="Post" asp-action="AddComment">
                    <input name="content" type="text" />
                    <a href="#" class="replyAchor" id="cancelReply">Cancel</a>
                    <input type="submit" value="Add Comment"/>
                </form>
            </div>
        }
        else
        {
            <a class="nav-link" asp-area="Identity" asp-page="/Account/Login">Add Comment</a>
        }
    </div>
</div>
